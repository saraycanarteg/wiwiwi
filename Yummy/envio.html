<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <link href="assets/css/main.css" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario de Pedido</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Segoe, "Segoe UI", "DejaVu Sans", "Trebuchet MS", Verdana, "sans-serif";
            background: #25282d;
            min-height: 100vh;
            padding: 20px;
        }

        .form-container {
            max-width: 900px;
            margin: 2rem auto;
            padding: 0;
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .back-button {
            margin: 1rem;
            padding: 0.5rem 1rem;
            color: white;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: color 0.2s ease;
        }

        .back-button:hover {
            color: #e5b652;
        }

        /* Header */
        .form-header {
            background: linear-gradient(135deg, #e5b652, #d4a54a);
            color: white;
            padding: 32px 24px;
            text-align: center;
        }

        .form-title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .form-subtitle {
            opacity: 0.9;
            font-size: 16px;
        }

        /* Form Content */
        .form-content {
            padding: 32px;
        }

        .form-section {
            margin-bottom: 40px;
        }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .section-icon {
            width: 28px;
            height: 28px;
            background: #e5b652;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: bold;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 8px;
            font-size: 15px;
        }

        .form-input {
            width: 100%;
            padding: 14px 16px;
            border: 2px solid #eee;
            border-radius: 8px;
            font-size: 15px;
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #e5b652;
            box-shadow: 0 0 0 3px rgba(229, 182, 82, 0.1);
        }

        .form-input.error {
            border-color: #e74c3c;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Direcci√≥n Section */
        .direccion-options {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
        }

        .direccion-btn {
            flex: 1;
            padding: 14px;
            border: 2px solid #eee;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
            font-size: 15px;
            font-weight: 600;
        }

        .direccion-btn.active {
            border-color: #e5b652;
            background: #fefbf6;
            color: #e5b652;
        }

        .direccion-btn:hover {
            border-color: #e5b652;
        }

        .ubicacion-container {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 16px;
            display: none;
        }

        .ubicacion-container.active {
            display: block;
        }

        .mapa-simulado {
            width: 100%;
            height: 120px;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-bottom: 16px;
        }

        /* Payment Methods */
        .payment-methods {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .payment-method {
            padding: 20px;
            border: 2px solid #eee;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }

        .payment-method.active {
            border-color: #e5b652;
            background: #fefbf6;
        }

        .payment-method:hover {
            border-color: #e5b652;
        }

        .payment-icon {
            font-size: 28px;
            margin-bottom: 12px;
        }

        .payment-name {
            font-weight: 600;
            color: #333;
            font-size: 16px;
        }

        .card-details {
            display: none;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-top: 20px;
        }

        .card-details.active {
            display: block;
        }

        .card-input {
            background: white;
        }

        /* Resumen del Pedido */
        .resumen-pedido {
            background: #f8f9fa;
            border-radius: 8px;
            padding: 24px;
            color: #25282d;
            margin-bottom: 15px;
        }

        .resumen-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            font-size: 15px;
        }

        .resumen-total {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 18px;
            padding-top: 12px;
            border-top: 2px solid #ddd;
            margin-top: 12px;
            color: #e5b652;
        }

        /* Submit Button */
        .submit-btn {
            width: 100%;
            padding: 18px;
            background: linear-gradient(135deg, #e5b652, #d4a54a);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .submit-btn:hover {
            background: linear-gradient(135deg, #d4a54a, #c49441);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(229, 182, 82, 0.4);
        }

        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }

            .payment-methods {
                grid-template-columns: 1fr;
            }

            .direccion-options {
                flex-direction: column;
            }

            .form-container {
                margin: 1rem;
                width: calc(100% - 2rem);
            }

            .form-content {
                padding: 24px;
            }

            .form-header {
                padding: 24px;
            }

            .form-title {
                font-size: 24px;
            }
        }

        .error-message {
            color: #e74c3c;
            font-size: 13px;
            margin-top: 6px;
            display: none;
        }

        .success-animation {
            text-align: center;
            padding: 60px 20px;
        }

        .success-icon {
            font-size: 80px;
            color: #27ae60;
            margin-bottom: 20px;
        }

        .success-title {
            font-size: 24px;
            color: #27ae60;
            margin-bottom: 16px;
            font-weight: bold;
        }

        .success-details {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
    </style>
</head>

<body>
    <main class="main">
        <div class="container">
            <a href="carrito.html" class="back-button">
                <i class="bi bi-arrow-left" style="color: white !important;"></i> ‚Üê Volver al carrito
            </a>

            <div class="form-container">
                <!-- Header con t√≠tulo -->
                <div class="form-header">
                    <h2 class="form-title">Finalizar Pedido</h2>
                    <p class="form-subtitle">Completa tus datos para confirmar el pedido</p>
                </div>

                <div class="form-content">
                    <form id="formularioPedido">
                        <!-- Datos Personales -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <span class="section-icon">1</span>
                                Datos Personales
                            </h3>

                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label">C√©dula *</label>
                                    <input type="text" class="form-input" id="cedula" placeholder="1234567890"
                                        maxlength="10">
                                    <div class="error-message" id="error-cedula">Ingresa una c√©dula v√°lida</div>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Nombre Completo *</label>
                                    <input type="text" class="form-input" id="nombre" placeholder="Juan P√©rez">
                                    <div class="error-message" id="error-nombre">El nombre es obligatorio</div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label class="form-label">Celular *</label>
                                <input type="tel" class="form-input" id="celular" placeholder="0987654321"
                                    maxlength="10">
                                <div class="error-message" id="error-celular">Ingresa un celular v√°lido</div>
                            </div>
                        </div>

                        <!-- Direcci√≥n -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <span class="section-icon">2</span>
                                Direcci√≥n de Entrega
                            </h3>

                            <div class="direccion-options">
                                <button type="button" class="direccion-btn active"
                                    onclick="seleccionarTipoDireccion('manual')">
                                    üìù Escribir Direcci√≥n
                                </button>
                                <button type="button" class="direccion-btn"
                                    onclick="seleccionarTipoDireccion('ubicacion')">
                                    üìç Usar Mi Ubicaci√≥n
                                </button>
                            </div>

                            <div id="direccion-manual" class="ubicacion-container active">
                                <div class="form-group">
                                    <label class="form-label">Direcci√≥n Espec√≠fica *</label>
                                    <textarea class="form-input" id="direccion" rows="3"
                                        placeholder="Ej: Av. Amazonas N21-147 y Roca, Edificio Torres del Sol, Piso 5, Dpto 502"></textarea>
                                    <div class="error-message" id="error-direccion">La direcci√≥n es obligatoria</div>
                                </div>
                            </div>

                            <div id="direccion-ubicacion" class="ubicacion-container">
                                <div class="mapa-simulado" style="height: 100%;">
                                    <img src="assets/img/mapa-simulado.png" alt="Mapa Simulado"
                                        style="width: 100%; height: 100%; border-radius: 8px;">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Referencia Adicional</label>
                                    <input type="text" class="form-input" id="referencia"
                                        placeholder="Casa azul, port√≥n negro">
                                </div>
                                <button type="button" class="direccion-btn" onclick="obtenerUbicacion()">
                                    üìç Detectar Mi Ubicaci√≥n
                                </button>
                            </div>
                        </div>

                        <!-- M√©todo de Pago -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <span class="section-icon">3</span>
                                M√©todo de Pago
                            </h3>

                            <div class="payment-methods">
                                <div class="payment-method active" onclick="seleccionarPago('tarjeta')">
                                    <div class="payment-icon">üí≥</div>
                                    <div class="payment-name">Tarjeta</div>
                                    <small>D√©bito / Cr√©dito</small>
                                </div>
                                <div class="payment-method" onclick="seleccionarPago('efectivo')">
                                    <div class="payment-icon">üíµ</div>
                                    <div class="payment-name">Efectivo</div>
                                    <small>Pago contra entrega</small>
                                </div>
                            </div>

                            <div id="tarjeta-details" class="card-details active">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">N√∫mero de Tarjeta *</label>
                                        <input type="text" class="form-input card-input" id="numeroTarjeta"
                                            placeholder="1234 5678 9012 3456" maxlength="19">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">Titular *</label>
                                        <input type="text" class="form-input card-input" id="titularTarjeta"
                                            placeholder="JUAN PEREZ">
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label class="form-label">Vencimiento *</label>
                                        <input type="text" class="form-input card-input" id="vencimiento"
                                            placeholder="MM/AA" maxlength="5">
                                    </div>
                                    <div class="form-group">
                                        <label class="form-label">CVV *</label>
                                        <input type="text" class="form-input card-input" id="cvv" placeholder="123"
                                            maxlength="4">
                                    </div>
                                </div>
                            </div>

                            <div id="efectivo-details" class="card-details">
                                <div class="form-group">
                                    <label class="form-label">Monto con el que vas a pagar (opcional)</label>
                                    <input type="number" class="form-input" id="montoEfectivo" placeholder="20.00"
                                        step="0.01">
                                    <small style="color: #666; font-size: 13px;">Si no especificas, prepara el monto
                                        exacto</small>
                                </div>
                            </div>
                        </div>

                        <!-- Resumen del Pedido -->
                        <div class="form-section">
                            <h3 class="section-title">
                                <span class="section-icon">4</span>
                                Resumen del Pedido
                            </h3>

                            <div class="resumen-pedido">
                                <div id="resumen-items">
                                    <!-- Los items se insertar√°n aqu√≠ din√°micamente -->
                                    <div class="resumen-item">
                                        <span>2x Hamburguesa Diamonds</span>
                                        <span>$15.98</span>
                                    </div>
                                    <div class="resumen-item">
                                        <span>1x Coca Cola</span>
                                        <span>$2.50</span>
                                    </div>
                                </div>
                                <div class="resumen-item">
                                    <span>Costo de env√≠o</span>
                                    <span>$1.50</span>
                                </div>
                                <div class="resumen-total">
                                    <span>Total a Pagar</span>
                                    <span id="resumen-total">$19.98</span>
                                </div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="button" class="submit-btn" onclick="abrirSeguimientoPedido()" id="btn-confirmar">
                            Confirmar Pedido - $19.98
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <script>
        // 11. MODIFICAR en envio.html - Funci√≥n para cargar datos guardados del formulario
        function cargarDatosFormulario() {
            const datosPedido = JSON.parse(localStorage.getItem('datosPedidoActual') || '{}');

            if (Object.keys(datosPedido).length > 0) {
                // Cargar datos personales
                if (datosPedido.cedula) document.getElementById('cedula').value = datosPedido.cedula;
                if (datosPedido.nombre) document.getElementById('nombre').value = datosPedido.nombre;
                if (datosPedido.celular) document.getElementById('celular').value = datosPedido.celular;
                if (datosPedido.direccion) document.getElementById('direccion').value = datosPedido.direccion;

                // Seleccionar m√©todo de pago
                if (datosPedido.metodoPago) {
                    const metodosPago = document.querySelectorAll('.payment-method');
                    metodosPago.forEach(metodo => {
                        metodo.classList.remove('active');
                        if (metodo.querySelector('.payment-name').textContent.includes(datosPedido.metodoPago)) {
                            metodo.classList.add('active');
                            if (datosPedido.metodoPago === 'Efectivo') {
                                seleccionarPago('efectivo');
                                if (datosPedido.montoEfectivo) {
                                    document.getElementById('montoEfectivo').value = datosPedido.montoEfectivo;
                                }
                            } else {
                                seleccionarPago('tarjeta');
                            }
                        }
                    });
                }

                console.log('üìã Datos del formulario restaurados');
            }
        }

        // 12. AGREGAR en envio.html - Llamar a cargarDatosFormulario() al cargar la p√°gina
        // Agregar esta l√≠nea al final del DOMContentLoaded o crear uno nuevo:
        document.addEventListener('DOMContentLoaded', function () {
            cargarResumenPedido();
            cargarDatosFormulario(); // Nueva llamada
        });


        function abrirSeguimientoPedido() {
            event.preventDefault(); // Prevenir el env√≠o normal del formulario

            if (validarFormulario()) {
                // Guardar datos del pedido en localStorage
                const datosPedido = {
                    cedula: document.getElementById('cedula').value,
                    nombre: document.getElementById('nombre').value,
                    celular: document.getElementById('celular').value,
                    direccion: document.getElementById('direccion').value,
                    metodoPago: document.querySelector('.payment-method.active .payment-name').textContent,
                    montoEfectivo: document.getElementById('montoEfectivo').value || null,
                    fechaPedido: new Date().toISOString(),
                    numeroPedido: 'DC-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 999999) + 1).padStart(6, '0')
                };

                localStorage.setItem('datosPedidoActual', JSON.stringify(datosPedido));

                // Mostrar mensaje de procesamiento
                const btnSubmit = document.getElementById('btn-confirmar');
                const textoOriginal = btnSubmit.textContent;
                btnSubmit.disabled = true;
                btnSubmit.textContent = 'Procesando pedido...';

                // Simular procesamiento y redireccionar
                setTimeout(() => {
                    // Redirigir a la p√°gina de seguimiento
                    window.location.href = 'seguimiento.html';
                }, 2000);
            }
        }

        function simularProgresoPedido() {
            if (!simulacionActiva) return;

            // Simular el avance del pedido con timeouts controlados
            const timeout1 = setTimeout(() => {
                if (simulacionActiva && estadoActual === 1) {
                    avanzarAPreparacion();
                }
            }, 5000);
            timeoutsActivos.push(timeout1);

            const timeout2 = setTimeout(() => {
                if (simulacionActiva && estadoActual === 2) {
                    avanzarAEntrega();
                }
            }, 15000);
            timeoutsActivos.push(timeout2);
        }

        function cargarDatosPedido() {
            const datosPedido = JSON.parse(localStorage.getItem('datosPedidoActual') || '{}');
            const carrito = JSON.parse(localStorage.getItem('carritoYummy') || '[]');

            if (datosPedido.numeroPedido) {
                // Actualizar n√∫mero de pedido
                document.querySelector('.pedido-id').textContent = `Pedido #${datosPedido.numeroPedido}`;

                // Actualizar fecha
                const fecha = new Date(datosPedido.fechaPedido);
                document.getElementById('fecha-pedido').textContent = fecha.toLocaleDateString('es-ES', {
                    day: '2-digit',
                    month: 'short',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });

                // Actualizar m√©todo de pago
                document.getElementById('metodo-pago').textContent = datosPedido.metodoPago;

                // Actualizar notificaci√≥n de efectivo
                const notificacionEfectivo = document.getElementById('notificacion-efectivo');
                if (datosPedido.metodoPago === 'Efectivo') {
                    notificacionEfectivo.style.display = 'block';
                    if (datosPedido.montoEfectivo) {
                        const mensaje = notificacionEfectivo.querySelector('.notification-message');
                        mensaje.innerHTML = `Se ha notificado al repartidor que el pago ser√° en efectivo. 
                Has indicado que pagar√°s con: <strong>$${datosPedido.montoEfectivo}</strong>. 
                Total del pedido: <strong>$${localStorage.getItem('carritoTotal') || '19.98'}</strong>`;
                    }
                } else {
                    notificacionEfectivo.style.display = 'none';
                }
            }

            // Actualizar resumen del pedido si hay carrito
            if (carrito.length > 0) {
                actualizarResumenPedido(carrito);
            }
        }

        // 4. AGREGAR en seguimiento.html - Funci√≥n para actualizar resumen
        function actualizarResumenPedido(carrito) {
            const resumenContainer = document.getElementById('order-summary');
            const itemsContainer = resumenContainer.querySelector('.order-item').parentElement;

            // Limpiar items existentes (excepto el total)
            const items = itemsContainer.querySelectorAll('.order-item');
            items.forEach((item, index) => {
                if (index < items.length - 1) { // No eliminar el √∫ltimo (total)
                    item.remove();
                }
            });

            // Agregar items del carrito
            const totalItem = itemsContainer.querySelector('.order-item:last-child');
            carrito.forEach(producto => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'order-item';
                itemDiv.innerHTML = `
            <span>${producto.cantidad}x ${producto.nombre}</span>
            <span>$${(producto.precio * producto.cantidad).toFixed(2)}</span>
        `;
                itemsContainer.insertBefore(itemDiv, totalItem);
            });

            // Agregar costo de env√≠o
            const envioDiv = document.createElement('div');
            envioDiv.className = 'order-item';
            envioDiv.innerHTML = `
        <span>Costo de env√≠o</span>
        <span>$1.50</span>
    `;
            itemsContainer.insertBefore(envioDiv, totalItem);

            // Actualizar total
            const total = localStorage.getItem('carritoTotal') || '19.98';
            totalItem.innerHTML = `
        <span>Total</span>
        <span>$${total}</span>
    `;

            // Actualizar totales en la p√°gina
            document.getElementById('total-pedido').textContent = `$${total}`;
        }

        function inicializarSeguimiento() {
            // Cargar datos del pedido actual
            cargarDatosPedido();

            // Resto del c√≥digo existente...
            const ahora = new Date();

            // Cargar datos del pedido desde localStorage
            const carrito = JSON.parse(localStorage.getItem('carritoYummy') || '[]');
            const total = localStorage.getItem('carritoTotal') || '19.98';

            document.getElementById('total-pedido').textContent = `$${total}`;
        }

        // 6. AGREGAR en seguimiento.html - Bot√≥n para limpiar datos (opcional, para testing)
        function limpiarDatosPedido() {
            localStorage.removeItem('datosPedidoActual');
            localStorage.removeItem('carritoYummy');
            localStorage.removeItem('carritoTotal');
            console.log('Datos del pedido limpiados');
        }


        document.addEventListener('DOMContentLoaded', function () {
            document.getElementById('modalPedido').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        });

        function cerrarFormulario() {
            document.getElementById('modalPedido').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        function abrirFormularioPedido() {
            document.getElementById('modalPedido').style.display = 'flex';
            document.body.style.overflow = 'hidden';
        }

        function seleccionarTipoDireccion(tipo) {
            const direccionManual = document.getElementById('direccion-manual');
            const direccionUbicacion = document.getElementById('direccion-ubicacion');
            const btnManual = document.querySelector('.direccion-btn.active');
            const btnUbicacion = document.querySelector('.direccion-btn:not(.active)');

            if (tipo === 'manual') {
                direccionManual.classList.add('active');
                direccionUbicacion.classList.remove('active');
                btnManual.classList.add('active');
                btnUbicacion.classList.remove('active');
            } else {
                direccionManual.classList.remove('active');
                direccionUbicacion.classList.add('active');
                btnManual.classList.remove('active');
                btnUbicacion.classList.add('active');
            }
        }

        function seleccionarPago(metodo) {
            const metodoTarjeta = document.getElementById('tarjeta-details');
            const metodoEfectivo = document.getElementById('efectivo-details');
            const btnTarjeta = document.querySelector('.payment-method.active');
            const btnEfectivo = document.querySelector('.payment-method:not(.active)');

            if (metodo === 'tarjeta') {
                metodoTarjeta.classList.add('active');
                metodoEfectivo.classList.remove('active');
                btnTarjeta.classList.add('active');
                btnEfectivo.classList.remove('active');
            } else {
                metodoTarjeta.classList.remove('active');
                metodoEfectivo.classList.add('active');
                btnTarjeta.classList.remove('active');
                btnEfectivo.classList.add('active');
            }
        }

        function obtenerUbicacion() {
            // Simulaci√≥n de obtenci√≥n de ubicaci√≥n
            setTimeout(() => {
                document.getElementById('direccion').value = 'Av. Siempre Viva 742';
                document.getElementById('referencia').value = 'Frente al parque';
                alert('Ubicaci√≥n detectada y rellenada en el formulario');
            }, 1000);
        }

        function validarFormulario() {
            // L√≥gica de validaci√≥n del formulario
            let esValido = true;

            // Validar c√©dula
            const cedula = document.getElementById('cedula').value;
            if (cedula.length < 10) {
                mostrarError('cedula', 'La c√©dula debe tener 10 d√≠gitos');
                esValido = false;
            } else {
                ocultarError('cedula');
            }

            // Validar nombre
            const nombre = document.getElementById('nombre').value;
            if (nombre.trim() === '') {
                mostrarError('nombre', 'El nombre es obligatorio');
                esValido = false;
            } else {
                ocultarError('nombre');
            }

            // Validar celular
            const celular = document.getElementById('celular').value;
            if (celular.length < 10) {
                mostrarError('celular', 'El celular debe tener 10 d√≠gitos');
                esValido = false;
            } else {
                ocultarError('celular');
            }

            // Validar direcci√≥n
            const direccion = document.getElementById('direccion').value;
            if (direccion.trim() === '') {
                mostrarError('direccion', 'La direcci√≥n es obligatoria');
                esValido = false;
            } else {
                ocultarError('direccion');
            }

            // Validar m√©todo de pago
            const metodoPagoActivo = document.querySelector('.payment-method.active');
            if (!metodoPagoActivo) {
                alert('Selecciona un m√©todo de pago');
                esValido = false;
            }

            return esValido;
        }

        function mostrarError(campo, mensaje) {
            const input = document.getElementById(campo);
            const errorDiv = document.getElementById('error-' + campo);
            errorDiv.textContent = mensaje;
            errorDiv.style.display = 'block';
            input.classList.add('error');
        }

        function ocultarError(campo) {
            const input = document.getElementById(campo);
            const errorDiv = document.getElementById('error-' + campo);
            errorDiv.style.display = 'none';
            input.classList.remove('error');
        }

        document.getElementById('formularioPedido').addEventListener('submit', function (event) {
            event.preventDefault();

            if (validarFormulario()) {
                // Aqu√≠ se procesar√≠a el env√≠o del formulario
                // Por ahora, solo mostraremos un mensaje de √©xito simulado
                document.getElementById('modalPedido').style.display = 'none';
                document.body.style.overflow = 'auto';

                const successModal = document.createElement('div');
                successModal.className = 'success-animation';
                successModal.innerHTML = `
            <div class="success-icon">‚úÖ</div>
            <h2>¬°Pedido Confirmado!</h2>
            <p>Gracias por tu pedido. Recibir√°s una confirmaci√≥n por correo electr√≥nico.</p>
        `;
                document.body.appendChild(successModal);

                setTimeout(() => {
                    successModal.remove();
                }, 3000);
            }
        });

        function cargarResumenPedido() {
            const carrito = JSON.parse(localStorage.getItem('carritoYummy') || '[]');
            const resumenItems = document.getElementById('resumen-items');
            const resumenTotal = document.getElementById('resumen-total');
            const btnSubmit = document.querySelector('.submit-btn');

            resumenItems.innerHTML = '';

            carrito.forEach(item => {
                const subtotal = item.precio * item.cantidad;
                const itemDiv = document.createElement('div');
                itemDiv.className = 'resumen-item';
                itemDiv.innerHTML = `
            <span>${item.cantidad}x ${item.nombre}</span>
            <span>$${subtotal.toFixed(2)}</span>
        `;
                resumenItems.appendChild(itemDiv);
            });

            const subtotal = carrito.reduce((sum, item) => sum + (item.precio * item.cantidad), 0);
            const envio = 1.50;
            const total = subtotal + envio;

            resumenTotal.textContent = `$${total.toFixed(2)}`;
            btnSubmit.textContent = `Confirmar Pedido - $${total.toFixed(2)}`;
        }

        // Llamar a la funci√≥n cuando se carga la p√°gina
        window.addEventListener('load', cargarResumenPedido);
    </script>
</body>

</html>