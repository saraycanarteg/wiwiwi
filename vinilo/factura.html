<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Facturaci√≥n</title>
<link rel="stylesheet" href="styleBill/estilo1.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">
            <img src="img/logo.png" alt="Logo" id="logo-img">
            <span style="font-weight: bold; color: #F87154;">Define Records</span>
        </div>
        <nav class="nav">
            <a href="sesion.html" class="nav-link">Inicio</a>
            <a href="inventario.html" class="nav-link">Inventario</a>
            <a href="factura.html" class="nav-link">Facturas</a>
            <a href="#" class="nav-link">Ayuda</a>
            <button class="account-btn" onclick="openAccountModal()">Mi Cuenta</button>
        </nav>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Title Section -->
        <div class="title-section">
            <h1>Sistema de Facturaci√≥n</h1>
        </div>

        <!-- Control Bar -->
		<div class="control-bar">
			<button class="filter-btn" onclick="toggleFilter()">
				<span>üîΩ</span>
				Filtrar
			</button>
			<button class="add-btn" onclick="window.location.href='a√±adirFactura.html'">
				<span>+</span>
				Agregar Factura
			</button>
			<button class="add-btn" onclick="window.location.href='reporteVentas.html'">
				<span>üìä</span>
				Reporte
			</button>
			<button class="search-icon">üîç</button>
		</div>
		
		<div class="filter-section" id="filterSection" style="display: none; margin-bottom: 20px;">
			<div class="form-grid">
				<div class="form-group">
					<label for="clienteFilter">Cliente</label>
					<input type="text" id="clienteFilter" placeholder="Nombre del cliente">
				</div>
				<div class="form-group">
					<label for="fechaInicio">Fecha desde</label>
					<input type="date" id="fechaInicio">
				</div>
				<div class="form-group">
					<label for="fechaFin">Fecha hasta</label>
					<input type="date" id="fechaFin">
				</div>
				<div class="form-group" style="align-self: end;">
					<button class="btn-secondary" onclick="aplicarFiltros()">Aplicar Filtros</button>
				</div>
			</div>
		</div>


        <!-- Invoice List -->
        <div class="invoice-list" id="invoiceList">
            <!-- Sample invoices -->
            <div class="invoice-item">
                <div class="invoice-header">
                    <div class="invoice-number">Factura No. 00001</div>
                    <div class="invoice-total">Total: $ 75.00</div>
                </div>
                <div class="invoice-details">
                    <div class="invoice-detail">Saray Ca√±arte</div>
                    <div class="invoice-detail">Detalle: Vinilo 1</div>
                </div>
                <div class="invoice-actions">
                    <button class="view-complete-btn" onclick="openInvoiceDetailModal(1)">Ver Completo</button>
                </div>
            </div>

            <div class="invoice-item">
                <div class="invoice-header">
                    <div class="invoice-number">Factura No. 00002</div>
                    <div class="invoice-total">Total: $ 35.00</div>
                </div>
                <div class="invoice-details">
                    <div class="invoice-detail">Dom√©nica Villag√≥mez</div>
                    <div class="invoice-detail">Detalle: Vinilo 2</div>
                </div>
                <div class="invoice-actions">
                    <button class="view-complete-btn" onclick="openInvoiceDetailModal(1)">Ver Completo</button>
                </div>
            </div>

            <div class="invoice-item">
                <div class="invoice-header">
                    <div class="invoice-number">Factura No. 00003</div>
                    <div class="invoice-total">Total: $ 50.00</div>
                </div>
                <div class="invoice-details">
                    <div class="invoice-detail">M√≥nica Armas</div>
                    <div class="invoice-detail">Detalle de Venta</div>
                </div>
                <div class="invoice-actions">
                    <button class="view-complete-btn" onclick="openInvoiceDetailModal(1)">Ver Completo</button>
                </div>
            </div>
        </div>

        <!-- Load More Section -->
        <div class="load-more">
            <button class="load-more-btn" onclick="loadMoreInvoices()">
                <span>‚ñº</span>
                Mostrar M√°s
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Define Records</h3>
                <p>Tu tienda especializada en vinilos con m√°s de 20 a√±os de experiencia. Encuentra desde cl√°sicos atemporales hasta las √∫ltimas novedades del mundo musical.</p>
              </div>
            
            <div class="footer-section">
                <h3>Contacto</h3>
                <p>üìç Calle de la M√∫sica 123, Centro Hist√≥rico</p>
                <p>üìû +593 98 765 4321</p>
                <p>‚úâÔ∏è info@definerecords.com</p>
                <p>üïí Lun - S√°b: 10:00 - 20:00</p>
                <p>üïí Dom: 12:00 - 18:00</p>
            </div>
            
            <div class="footer-section">
                <h3>Categor√≠as</h3>
                <a href="#">Rock & Pop</a>
                <a href="#">Jazz & Blues</a>
                <a href="#">Electr√≥nica</a>
                <a href="#">Hip Hop & R&B</a>
                <a href="#">M√∫sica Latina</a>
                <a href="#">Cl√°sica</a>
                <a href="#">Ediciones Especiales</a>
            </div>
            
            <div class="footer-section">
                <h3>Servicios</h3>
                <a href="#">Gesti√≥n de Inventario</a>
                <a href="#">Facturaci√≥n Digital</a>
                <a href="#">B√∫squeda Avanzada</a>
                <a href="#">Reservas Online</a>
                <a href="#">Intercambio de Vinilos</a>
                <a href="#">Valoraciones</a>
                <a href="#">Soporte T√©cnico</a>
            </div>
        </div>
        
        <div class="footer-bottom">
            <p>&copy; 2025 Define Records. Todos los derechos reservados. | Sistema de gesti√≥n desarrollado con ‚ù§Ô∏è para los amantes de la m√∫sica anal√≥gica.</p>
        </div>
    </footer>

   <!-- Account Modal -->
    <div class="modal-overlay" id="accountModal">
        <div class="account-container">
            <button class="close-btn" onclick="closeAccountModal()">&times;</button>
            
            <img src="img/fpf.png" alt="Foto de perfil" class="profile-picture">
            
            <h2 class="account-title">Mi Cuenta</h2>
            
            <div class="account-info">
                <div class="info-item">
                    <span class="info-label">Usuario:</span>
                    <span class="info-value">admin</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Nombre:</span>
                    <span class="info-value">Saray Canarte</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Rol:</span>
                    <span class="info-value">Administrador</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email:</span>
                    <span class="info-value">saray@definerecords.com</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Estado:</span>
                    <span class="status-badge">Activo</span>
                </div>
                <div class="info-item">
                    <span class="info-label">√öltimo acceso:</span>
                    <span class="info-value">Hoy, 14:30</span>
                </div>
            </div>
			<button class="logout-btn" onclick="logoutUser()">
                Cerrar Sesi√≥n
            </button>
        </div>
    </div>
		<div class="modal-overlay" id="invoiceDetailModal">
		  <div class="modal-content">
			<button class="close-btn" onclick="closeInvoiceDetailModal()">√ó</button>
			<h2>Detalle de Factura</h2>
			<div id="invoiceDetailContent">
			</div>
		  </div>
	</div>


    <script>
		
		// Funciones para el modal de cuenta
        function openAccountModal() {
            document.getElementById('accountModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeAccountModal() {
            document.getElementById('accountModal').classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Cerrar modal al hacer click fuera de √©l
        document.getElementById('accountModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeAccountModal();
            }
        });

        // Cerrar modal con tecla Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && document.getElementById('accountModal').classList.contains('active')) {
                closeAccountModal();
            }
        });
        let invoices = [];
        let invoiceCounter = 4;

        // Modal functions
        function openNewInvoiceModal() {
            document.getElementById('newInvoiceModal').classList.add('active');
            document.getElementById('invoice-number').value = 'FAC-' + String(invoiceCounter).padStart(5, '0');
            document.getElementById('invoice-date').value = new Date().toISOString().split('T')[0];
        }

        function closeNewInvoiceModal() {
            document.getElementById('newInvoiceModal').classList.remove('active');
        }
		
		function logoutUser() {
            // Confirmar cierre de sesi√≥n
            if (confirm('¬øEst√°s seguro de que deseas cerrar sesi√≥n?')) {
                // Mostrar mensaje de confirmaci√≥n
                alert('Sesi√≥n cerrada exitosamente. ¬°Hasta pronto!');
                
                // Cerrar el modal
                closeAccountModal();
                
                // Opcional: Redirigir a p√°gina de login o recargar
                window.location.href = 'index.html';
                // O simplemente recargar la p√°gina actual
                
            }
        }

        // Cerrar modal al hacer click fuera de √©l
        document.getElementById('accountModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeAccountModal();
            }
        });

        // Cerrar modal con tecla Escape
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape' && document.getElementById('accountModal').classList.contains('active')) {
                closeAccountModal();
            }
        });
		
		function openInvoiceDetailModal(invoiceId) {
			const modal = document.getElementById("invoiceDetailModal");
			const content = document.getElementById("invoiceDetailContent");

			// Simulando datos, puedes conectar con tu base o arreglo
			const detalles = {
				1: {
					cliente: "Saray Ca√±arte",
					direccion: "Av. Amazonas y Eloy Alfaro",
					telefono: "0991234567",
					items: [
						{ descripcion: "Vinilo 1", cantidad: 1, precio: 75.00 }
					],
				},
				2: {
					cliente: "Dom√©nica Villag√≥mez",
					direccion: "Calle de la M√∫sica 123",
					telefono: "0987654321",
					items: [
						{ descripcion: "Vinilo 2", cantidad: 1, precio: 35.00 }
					],
				},
				3: {
					cliente: "M√≥nica Armas",
					direccion: "Cdla. Los √Ålamos",
					telefono: "0973344556",
					items: [
						{ descripcion: "Vinilo 3", cantidad: 1, precio: 50.00 }
					],
				}
			};

			const factura = detalles[invoiceId];
			if (!factura) return;

			const itemsHTML = factura.items.map(item => `
				<div class="item">
					<strong>${item.descripcion}</strong><br>
					Cantidad: ${item.cantidad}<br>
					Precio Unitario: $${item.precio.toFixed(2)}<br>
					Subtotal: $${(item.cantidad * item.precio).toFixed(2)}
				</div>
			`).join("");

			const total = factura.items.reduce((sum, item) => sum + item.cantidad * item.precio, 0);

			content.innerHTML = `
				<p><strong>Cliente:</strong> ${factura.cliente}</p>
				<p><strong>Direcci√≥n:</strong> ${factura.direccion}</p>
				<p><strong>Tel√©fono:</strong> ${factura.telefono}</p>

				<h4>Productos/Servicios</h4>
				${itemsHTML}

				<h4>Total</h4>
				<p><strong>$${total.toFixed(2)}</strong></p>
			`;

			modal.classList.add("active");
			document.body.style.overflow = 'hidden';
		}

		function closeInvoiceDetailModal() {
			document.getElementById("invoiceDetailModal").classList.remove("active");
			document.body.style.overflow = 'auto';
		}
		
		function toggleFilter() {
			const filterSection = document.getElementById('filterSection');
			filterSection.style.display = (filterSection.style.display === 'none') ? 'block' : 'none';
		}

		function aplicarFiltros() {
			const cliente = document.getElementById('clienteFilter').value.toLowerCase();
			const desde = document.getElementById('fechaInicio').value;
			const hasta = document.getElementById('fechaFin').value;

			const facturas = document.querySelectorAll('.invoice-item');
			facturas.forEach(factura => {
				const detalleCliente = factura.querySelector('.invoice-detail')?.textContent.toLowerCase();
				const fechaFactura = factura.getAttribute('data-fecha'); // Opcional si tienes fecha real

				let mostrar = true;

				if (cliente && !detalleCliente.includes(cliente)) {
					mostrar = false;
				}

				// Si tuvieras fecha real: comparar contra "desde" y "hasta"
				if (desde && fechaFactura && fechaFactura < desde) mostrar = false;
				if (hasta && fechaFactura && fechaFactura > hasta) mostrar = false;

				factura.style.display = mostrar ? 'block' : 'none';
			});
		}
		let currentIndex = 3;
		function loadMoreInvoices() {
			const totalFacturas = 5; // c√°mbialo seg√∫n cu√°ntas tengas
			if (currentIndex >= totalFacturas) {
				alert("No hay m√°s facturas disponibles üìë");
				return;
			}

			// Simulaci√≥n: crea una factura adicional
			const nuevaFactura = document.createElement("div");
			nuevaFactura.classList.add("invoice-item");
			nuevaFactura.innerHTML = `
				<div class="invoice-header">
					<div class="invoice-number">Factura No. 0000${currentIndex + 1}</div>
					<div class="invoice-total">Total: $ 40.00</div>
				</div>
				<div class="invoice-details">
					<div class="invoice-detail">Cliente ${currentIndex + 1}</div>
					<div class="invoice-detail">Detalle: Vinilo especial</div>
				</div>
				<div class="invoice-actions">
					<button class="view-complete-btn" onclick="openInvoiceDetailModal(${currentIndex + 1})">Ver Completo</button>
				</div>
			`;
			document.getElementById("invoiceList").appendChild(nuevaFactura);
			currentIndex++;
		}
	</script>
</body>
</html>